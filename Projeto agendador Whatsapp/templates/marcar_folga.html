<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Marcar Folga</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
      .custom-bg {
          background-color: #65B037;
      }
      .text-title {
          color: #FFFFFF;
      }
      .nav-bar {
          background-color: #4C9F38;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
          width: 100%;
      }
      .nav-item {
          padding: 10px 20px;
          color: #FFFFFF;
          font-weight: bold;
          font-size: 1.20rem;
          transition: all 0.3s ease;
      }
      .nav-item:hover {
          background-color: #65B037;
          border-radius: 8px;
          transform: scale(1.05);
      }
      .btn-folga {
          background-color: #E74C3C;
      }
      .btn-folga:hover {
          background-color: #C0392B;
      }
      .btn-delete {
          background-color: #E74C3C;
      }
      .btn-delete:hover {
          background-color: #C0392B;
      }
  </style>
</head>
<body class="custom-bg font-sans text-gray-900">
    <h1 class="text-4xl font-bold text-center text-title py-8">Marcar Folga</h1>
    <div class="max-w-lg mx-auto bg-white p-6 rounded-md shadow-md mt-8">
        <form action="{{ url_for('marcar_folga') }}" method="post" class="space-y-4">
            <label for="data_folga" class="block text-sm font-medium text-gray-700">Data da Folga:</label>
            <input type="date" id="data_folga" name="data_folga" class="w-full p-2 border border-gray-300 rounded">
            <button type="submit" class="w-full py-2 px-4 btn-folga text-white rounded hover:bg-red-700 transition">Marcar Folga</button>
        </form>
    </div>

    <!-- Lista de folgas existentes -->
    <div class="max-w-lg mx-auto bg-white p-6 rounded-md shadow-md mt-8">
        <h2 class="text-xl font-semibold mb-4">Dias de Folga Marcados</h2>
        <ul class="space-y-2">
            {% for folga in folgas %}
            <li class="flex justify-between items-center bg-gray-100 p-2 rounded">
                <span>{{ folga }}</span>
                <form action="{{ url_for('excluir_folga_route') }}" method="post" class="inline">
                    <input type="hidden" name="data" value="{{ folga }}">
                    <button type="submit" class="btn-delete py-1 px-3 text-white rounded">Excluir</button>
                </form>
            </li>
            {% else %}
            <li class="text-center py-4 text-gray-500">Nenhuma folga marcada.</li>
            {% endfor %}
        </ul>
    </div>

    <nav class="nav-bar mt-8">
        <ul class="flex justify-center space-x-4">
            <li><a href="{{ url_for('index') }}" class="nav-item">Agendar Consulta</a></li>
            <li><a href="{{ url_for('calendario') }}" class="nav-item">Calendário</a></li>
            <li><a href="{{ url_for('config_horarios') }}" class="nav-item">Configurar Horários</a></li>
            <li><a href="{{ url_for('tipos_consulta') }}" class="nav-item">Tipos de Consulta</a></li>
        </ul>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        // Exibindo mensagens flash com SweetAlert2
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                Swal.fire({
                    icon: '{{ "success" if category == "success" else "error" }}',
                    title: '{{ message }}',
                    showConfirmButton: false,
                    timer: 3000 // Duração do popup em milissegundos
                });
            {% endfor %}
        {% endif %}
        {% endwith %}
    </script>
</body>
</html>
