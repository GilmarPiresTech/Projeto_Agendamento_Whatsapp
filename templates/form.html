<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Agendamento de Consultas</title>
    
    <!-- Tailwind CSS via CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/form.css') }}">
</head>
<body class="custom-bg font-sans text-gray-900">

    <h1 class="text-4xl font-bold text-center text-title py-8">Agende sua Consulta</h1>
    <div class="max-w-2xl mx-auto bg-white p-6 rounded-md shadow-md mt-8">
        <form action="{{ url_for('submit') }}" method="post" id="form-agendamento" class="space-y-4">
            <label for="tipo_consulta" class="block text-sm font-medium text-gray-700">Tipo de Consulta:</label>
            <select id="tipo_consulta" name="tipo_consulta" required class="w-full p-2 border border-gray-300 rounded" onchange="atualizarDetalhesConsulta()">
                <option value="" disabled selected>Selecione um tipo de consulta</option>
                {% for consulta in tipos_consulta %}
                <option value="{{ consulta['Tipo'] }}" data-duracao="{{ consulta['Duração'] }}" data-valor="{{ consulta['Valor'] }}">
                    {{ consulta['Tipo'] }}
                </option>
                {% endfor %}
            </select>

            <div id="detalhes-consulta" class="space-y-4 hidden">
                <label for="duracao" class="block text-sm font-medium text-gray-700">Duração:</label>
                <input type="text" id="duracao" name="duracao" class="w-full p-2 border border-gray-300 rounded bg-gray-100" readonly>

                <label for="valor" class="block text-sm font-medium text-gray-700">Valor (R$):</label>
                <input type="text" id="valor" name="valor" class="w-full p-2 border border-gray-300 rounded bg-gray-100" readonly>
            </div>

            <div class="container">
                <div class="title">Selecione uma data:</div>
                <div class="date-selection" id="date-selection">
                    <!-- Botões de data serão inseridos dinamicamente -->
                </div>
            </div>

            <div class="container">
                <div class="title">Selecione um horário disponível:</div>
                <div class="time-selection" id="time-selection">
                    <!-- Botões de horário serão inseridos dinamicamente -->
                </div>
            </div>

            <input type="hidden" name="selected_date" id="selected_date">
            <input type="hidden" name="selected_time" id="selected_time">

            <label for="nome" class="block text-sm font-medium text-gray-700">Nome:</label>
            <input type="text" id="nome" name="nome" required class="w-full p-2 border border-gray-300 rounded">

            <label for="email" class="block text-sm font-medium text-gray-700">Email:</label>
            <input type="email" id="email" name="email" required class="w-full p-2 border border-gray-300 rounded">

            <label for="celular" class="block text-sm font-medium text-gray-700">Celular:</label>
            <input type="tel" id="celular" name="celular" required class="w-full p-2 border border-gray-300 rounded">

            <label for="comentario" class="block text-sm font-medium text-gray-700">Comentário adicional:</label>
            <textarea id="comentario" name="comentario" class="w-full p-2 border border-gray-300 rounded"></textarea>

            <button type="submit" class="w-full py-2 px-4 btn-submit text-white rounded hover:bg-blue-700 transition">Agendar</button>
        </form>
    </div>

    <nav class="nav-bar mt-8">
        <ul class="flex justify-center space-x-4">
            <li><a href="{{ url_for('calendario') }}" class="nav-item">Calendário</a></li>
            <li><a href="{{ url_for('config_horarios') }}" class="nav-item">Configurar Horários</a></li>
            <li><a href="{{ url_for('tipos_consulta') }}" class="nav-item">Tipos de Consulta</a></li>
            <li><a href="{{ url_for('marcar_folga') }}" class="nav-item">Marcar Folga</a></li>
        </ul>
    </nav>

    <!-- Script JS personalizado -->
    <script src="{{ url_for('static', filename='js/form.js') }}"></script>
</body>
</html>
